<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>管理者ガイド - Classroom Check-in</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans JP', sans-serif; }
  </style>
</head>
<body class="bg-gray-50">
  <!-- ヘッダー -->
  <header class="bg-blue-600 text-white shadow-lg">
    <div class="max-w-6xl mx-auto px-4 py-6">
      <h1 class="text-2xl md:text-3xl font-bold">Classroom Check-in</h1>
      <p class="mt-2 text-blue-100">オンライン講座の入退室管理システム</p>
    </div>
  </header>

  <!-- ナビゲーション -->
  <nav class="bg-white shadow">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex space-x-4 overflow-x-auto">
        <a href="index.html" class="px-4 py-3 text-gray-600 hover:text-blue-600">ホーム</a>
        <a href="student-guide.html" class="px-4 py-3 text-gray-600 hover:text-blue-600">受講者ガイド</a>
        <a href="admin-guide.html" class="px-4 py-3 text-blue-600 border-b-2 border-blue-600 font-medium">管理者ガイド</a>
        <a href="architecture.html" class="px-4 py-3 text-gray-600 hover:text-blue-600">システム構成</a>
        <a href="e2e-test-results.html" class="px-4 py-3 text-gray-600 hover:text-blue-600">E2Eテスト</a>
      </div>
    </div>
  </nav>

  <!-- メインコンテンツ -->
  <main class="max-w-6xl mx-auto px-4 py-8">

    <!-- ページタイトル -->
    <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg shadow-md p-6 mb-8 text-white">
      <h2 class="text-2xl font-bold mb-2">&#128736; 管理者ガイド</h2>
      <p>講座・受講者・セッションの管理方法を説明します</p>
    </div>

    <!-- 目次 -->
    <section class="bg-white rounded-lg shadow-md p-6 mb-8">
      <h2 class="text-xl font-bold text-gray-800 mb-4">このページの内容</h2>
      <div class="grid md:grid-cols-2 gap-4">
        <a href="#courses" class="p-4 border rounded-lg hover:bg-blue-50 hover:border-blue-300 transition">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">&#128218;</span>
            <div>
              <h3 class="font-bold text-gray-800">講座管理</h3>
              <p class="text-sm text-gray-600">講座の登録・編集・削除</p>
            </div>
          </div>
        </a>
        <a href="#users" class="p-4 border rounded-lg hover:bg-blue-50 hover:border-blue-300 transition">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">&#128101;</span>
            <div>
              <h3 class="font-bold text-gray-800">受講者管理</h3>
              <p class="text-sm text-gray-600">受講者の登録・講座への割当</p>
            </div>
          </div>
        </a>
        <a href="#sessions" class="p-4 border rounded-lg hover:bg-blue-50 hover:border-blue-300 transition">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">&#128203;</span>
            <div>
              <h3 class="font-bold text-gray-800">セッション管理</h3>
              <p class="text-sm text-gray-600">入退室記録の確認・修正</p>
            </div>
          </div>
        </a>
        <a href="#notifications" class="p-4 border rounded-lg hover:bg-blue-50 hover:border-blue-300 transition">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">&#128276;</span>
            <div>
              <h3 class="font-bold text-gray-800">通知設定</h3>
              <p class="text-sm text-gray-600">退室忘れ通知のポリシー設定</p>
            </div>
          </div>
        </a>
      </div>
    </section>

    <!-- 講座管理 -->
    <section id="courses" class="bg-white rounded-lg shadow-md p-6 mb-8">
      <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl mr-3">&#128218;</span>
        講座管理
      </h2>

      <p class="text-gray-600 mb-6">
        受講者が参加できる講座を登録・管理します。
        講座情報はGoogle Classroomとは別に、このシステムで管理します。
      </p>

      <!-- 講座の登録 -->
      <div class="mb-8">
        <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b">講座を新規登録する</h3>

        <div class="space-y-4">
          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">管理画面の「講座管理」を開く</h4>
              <p class="text-gray-600 text-sm mt-1">サイドメニューから「講座管理」を選択します。</p>
            </div>
          </div>

          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">「新規作成」ボタンをクリック</h4>
              <p class="text-gray-600 text-sm mt-1">講座情報の入力フォームが表示されます。</p>
            </div>
          </div>

          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">講座情報を入力</h4>
              <div class="mt-3 bg-white border rounded-lg p-4">
                <table class="w-full text-sm">
                  <tr class="border-b">
                    <td class="py-2 font-medium text-gray-700 w-32">講座名</td>
                    <td class="py-2 text-gray-600">例: プログラミング入門</td>
                  </tr>
                  <tr class="border-b">
                    <td class="py-2 font-medium text-gray-700">説明</td>
                    <td class="py-2 text-gray-600">例: Python基礎を学ぶ講座です</td>
                  </tr>
                  <tr class="border-b">
                    <td class="py-2 font-medium text-gray-700">Classroom URL</td>
                    <td class="py-2 text-gray-600">Google ClassroomのURLを入力</td>
                  </tr>
                  <tr>
                    <td class="py-2 font-medium text-gray-700">表示設定</td>
                    <td class="py-2 text-gray-600">受講者に表示するかどうか</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">4</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">「保存」ボタンをクリック</h4>
              <p class="text-gray-600 text-sm mt-1">講座が登録されます。</p>
            </div>
          </div>
        </div>
      </div>

      <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
        <div class="flex items-start space-x-3">
          <span class="text-xl">&#128161;</span>
          <div>
            <h4 class="font-bold text-yellow-800">ポイント</h4>
            <ul class="mt-2 text-yellow-700 text-sm space-y-1">
              <li>・講座を非表示にすると、受講者の講座一覧に表示されなくなります</li>
              <li>・Classroom URLは正確に入力してください（INボタン押下後の遷移先になります）</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 受講者管理 -->
    <section id="users" class="bg-white rounded-lg shadow-md p-6 mb-8">
      <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl mr-3">&#128101;</span>
        受講者管理
      </h2>

      <p class="text-gray-600 mb-6">
        システムを利用する受講者を登録し、講座への割当を行います。
      </p>

      <!-- 受講者の登録 -->
      <div class="mb-8">
        <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b">受講者を登録する</h3>

        <div class="space-y-4">
          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">「受講者管理」を開く</h4>
            </div>
          </div>

          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">受講者情報を入力</h4>
              <div class="mt-3 bg-white border rounded-lg p-4">
                <table class="w-full text-sm">
                  <tr class="border-b">
                    <td class="py-2 font-medium text-gray-700 w-32">メールアドレス</td>
                    <td class="py-2 text-gray-600">Googleアカウントのメールアドレス</td>
                  </tr>
                  <tr class="border-b">
                    <td class="py-2 font-medium text-gray-700">表示名</td>
                    <td class="py-2 text-gray-600">システム上で表示される名前</td>
                  </tr>
                  <tr>
                    <td class="py-2 font-medium text-gray-700">役割</td>
                    <td class="py-2 text-gray-600">受講者 / 管理者</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">講座への割当</h4>
              <p class="text-gray-600 text-sm mt-1">
                受講者が参加できる講座を選択します。
                ここで選択した講座のみが、受講者の画面に表示されます。
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
        <div class="flex items-start space-x-3">
          <span class="text-xl">&#9432;</span>
          <div>
            <h4 class="font-bold text-blue-800">重要</h4>
            <p class="mt-1 text-blue-700 text-sm">
              メールアドレスは、受講者がログインに使用するGoogleアカウントと一致している必要があります。
              間違ったメールアドレスを登録すると、受講者がログインできません。
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- セッション管理 -->
    <section id="sessions" class="bg-white rounded-lg shadow-md p-6 mb-8">
      <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl mr-3">&#128203;</span>
        セッション管理
      </h2>

      <p class="text-gray-600 mb-6">
        受講者の入退室記録（セッション）を確認・修正します。
      </p>

      <!-- セッション一覧 -->
      <div class="mb-8">
        <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b">セッション一覧の見方</h3>

        <div class="bg-white border rounded-lg overflow-hidden">
          <table class="w-full text-sm">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-4 py-3 text-left font-medium text-gray-700">受講者</th>
                <th class="px-4 py-3 text-left font-medium text-gray-700">講座</th>
                <th class="px-4 py-3 text-left font-medium text-gray-700">入室時刻</th>
                <th class="px-4 py-3 text-left font-medium text-gray-700">退室時刻</th>
                <th class="px-4 py-3 text-left font-medium text-gray-700">状態</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b">
                <td class="px-4 py-3">山田太郎</td>
                <td class="px-4 py-3">プログラミング入門</td>
                <td class="px-4 py-3">10:00</td>
                <td class="px-4 py-3">12:05</td>
                <td class="px-4 py-3"><span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">完了</span></td>
              </tr>
              <tr class="border-b bg-yellow-50">
                <td class="px-4 py-3">佐藤花子</td>
                <td class="px-4 py-3">データ分析基礎</td>
                <td class="px-4 py-3">14:00</td>
                <td class="px-4 py-3 text-gray-400">-</td>
                <td class="px-4 py-3"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs">入室中</span></td>
              </tr>
              <tr>
                <td class="px-4 py-3">鈴木一郎</td>
                <td class="px-4 py-3">Web開発実践</td>
                <td class="px-4 py-3">09:30</td>
                <td class="px-4 py-3">11:45</td>
                <td class="px-4 py-3"><span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">完了</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="mt-2 text-sm text-gray-500">※ 黄色の行は退室処理が完了していないセッションです</p>
      </div>

      <!-- セッションの修正 -->
      <div class="mb-8">
        <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b">退室時刻を手動で設定する</h3>

        <p class="text-gray-600 mb-4">
          受講者がOUTボタンを押し忘れた場合、管理者が退室時刻を設定できます。
        </p>

        <div class="space-y-4">
          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">対象のセッションを選択</h4>
              <p class="text-gray-600 text-sm mt-1">「入室中」状態のセッションの編集ボタンをクリックします。</p>
            </div>
          </div>

          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">退室時刻を入力</h4>
              <p class="text-gray-600 text-sm mt-1">実際に講座を終了したと思われる時刻を入力します。</p>
            </div>
          </div>

          <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
            <div class="flex-shrink-0 w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-800">保存</h4>
              <p class="text-gray-600 text-sm mt-1">セッションが「完了」状態になり、滞在時間が確定します。</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 通知設定 -->
    <section id="notifications" class="bg-white rounded-lg shadow-md p-6 mb-8">
      <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl mr-3">&#128276;</span>
        通知設定
      </h2>

      <p class="text-gray-600 mb-6">
        退室忘れの通知ポリシーを設定します。
        設定に基づいて、システムが自動的に通知メールを送信します。
      </p>

      <!-- 通知の流れ -->
      <div class="mb-8">
        <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b">通知の仕組み</h3>

        <div class="mermaid">
flowchart LR
    A[入室中のまま<br>一定時間経過] --> B{通知ポリシー<br>をチェック}
    B -->|条件に該当| C[受講者に<br>メール通知]
    B -->|該当しない| D[待機継続]
    C --> E[受講者が<br>退室処理]
        </div>
      </div>

      <!-- ポリシー設定 -->
      <div class="mb-8">
        <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b">通知ポリシーの設定項目</h3>

        <div class="bg-white border rounded-lg p-4">
          <table class="w-full text-sm">
            <tr class="border-b">
              <td class="py-3 font-medium text-gray-700 w-40">対象範囲</td>
              <td class="py-3 text-gray-600">全体 / 特定の講座 / 特定の受講者</td>
            </tr>
            <tr class="border-b">
              <td class="py-3 font-medium text-gray-700">通知タイミング</td>
              <td class="py-3 text-gray-600">入室から何時間後に通知するか（例: 3時間後）</td>
            </tr>
            <tr class="border-b">
              <td class="py-3 font-medium text-gray-700">通知方法</td>
              <td class="py-3 text-gray-600">メール</td>
            </tr>
            <tr>
              <td class="py-3 font-medium text-gray-700">有効/無効</td>
              <td class="py-3 text-gray-600">ポリシーを一時的に無効化できます</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
        <div class="flex items-start space-x-3">
          <span class="text-xl">&#9989;</span>
          <div>
            <h4 class="font-bold text-green-800">おすすめ設定</h4>
            <p class="mt-1 text-green-700 text-sm">
              講座の標準的な長さ + 30分〜1時間 を通知タイミングに設定することをおすすめします。
              例: 2時間の講座なら、3時間後に通知を設定。
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- 管理フロー全体図 -->
    <section class="bg-white rounded-lg shadow-md p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">管理業務の全体フロー</h2>

      <div class="mermaid">
flowchart TB
    subgraph 初期設定["1. 初期設定（最初に1回）"]
        A[講座を登録] --> B[受講者を登録]
        B --> C[受講者を講座に割当]
        C --> D[通知ポリシーを設定]
    end

    subgraph 日常運用["2. 日常運用"]
        E[受講者が入退室] --> F{退室忘れ?}
        F -->|はい| G[通知が送信される]
        G --> H[受講者が対応 or<br>管理者が修正]
        F -->|いいえ| I[正常に記録]
    end

    subgraph 確認作業["3. 確認作業"]
        J[セッション一覧で<br>出席状況を確認]
        K[必要に応じて<br>レポート出力]
    end

    初期設定 --> 日常運用
    日常運用 --> 確認作業
      </div>
    </section>

  </main>

  <!-- フッター -->
  <footer class="bg-gray-800 text-gray-300 mt-12">
    <div class="max-w-6xl mx-auto px-4 py-8">
      <p class="text-center text-sm">
        Classroom Check-in - オンライン講座の入退室管理システム
      </p>
    </div>
  </footer>

  <script>
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
</body>
</html>
