# 管理画面設計

## 目的
- 対象講座・通知・セッション補正などの運用を一元管理する
- 入室/退室の監視と例外対応を迅速に行う

## ロールと権限
- admin: すべての設定/補正/閲覧が可能
- teacher: 講座単位の閲覧/補正（要件に応じて）
- student: 管理画面へのアクセス不可

## 画面構成

| 画面 | 実装状況 |
|------|---------|
| ダッシュボード | 未実装 |
| 講座一覧 | 実装済み |
| 受講者一覧 | 実装済み |
| セッション管理 | 実装済み |
| 通知ポリシー | 実装済み |
| 監査ログ | 未実装 |

## 1. ダッシュボード（未実装）
- 指標: 本日のIN/OUT件数、未退室数、講座数
- 重要通知: 未退室の上位講座/受講者

## 2. 講座一覧
- 一覧項目:
  - 講座名 / Classroom URL
  - enabled（対象か）
  - visible（受講者に表示するか）
  - 最終更新
- 操作:
  - 講座の新規作成・編集・削除
  - enabled/visible の切り替え
- ルール:
  - enabled=false でも visible=true にはできない

## 3. 受講者一覧
- 一覧項目:
  - 名前 / メール / 参加講座数 / 未退室数
- 操作:
  - 受講者の新規作成・編集・削除
  - 講座への登録（Enrollment）
  - 受講者ごとの通知ポリシー上書き

## 4. セッション管理
- 一覧項目:
  - 受講者 / 講座 / IN / OUT / 状態 / ソース
- 操作:
  - OUT未設定を手動クローズ（強制終了）
- ルール:
  - 補正は必ずログに残す（AttendanceEvent）

## 5. 通知ポリシー
- グローバル設定:
  - 初回通知までの時間
  - 再通知間隔
  - 最大通知日数
- 上書き:
  - 講座単位 / 受講者単位
- 操作:
  - 有効/無効切り替え

## 6. 監査ログ（未実装）
- 対象:
  - 管理者による設定変更
  - セッション補正
  - 通知送信
- 検索/フィルタ:
  - 期間 / 管理者 / 対象講座

## UIガイド
- 一覧は必ず検索/フィルタが可能
- 重要操作には確認ダイアログ
- 変更は即時保存、もしくは明示的な保存ボタン
- 失敗時は理由を表示し再試行を促す

## バリデーション
- 講座名は空/重複不可
- enabled/visible は整合性チェック
- OUT補正は IN より後の時刻のみ許可
